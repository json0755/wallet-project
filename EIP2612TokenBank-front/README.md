# EIP2612 Token Bank Frontend

åŸºäº Permit2 çš„æ— Gasæˆæƒå­˜æ¬¾ç³»ç»Ÿå‰ç«¯åº”ç”¨ã€‚

## åŠŸèƒ½ç‰¹æ€§

- ğŸš€ **Permit2 å­˜æ¬¾**: ä¸€é”®ç­¾åå­˜æ¬¾ï¼Œæ— éœ€é¢„å…ˆæˆæƒï¼ŒèŠ‚çœGasè´¹ç”¨
- ğŸ“ **æ ‡å‡†å­˜æ¬¾**: ä¼ ç»Ÿçš„æˆæƒ+å­˜æ¬¾æ–¹å¼
- ğŸ’° **ä½™é¢æŸ¥çœ‹**: å®æ—¶æ˜¾ç¤ºTokenä½™é¢ã€é“¶è¡Œä½™é¢å’ŒPermit2æˆæƒé¢åº¦
- ğŸ”— **é’±åŒ…è¿æ¥**: æ”¯æŒMetaMaskç­‰ä¸»æµé’±åŒ…
- ğŸ¨ **ç¾è§‚ç•Œé¢**: åŸºäºAnt Designçš„ç°ä»£åŒ–UIè®¾è®¡

## æŠ€æœ¯æ ˆ

- **å‰ç«¯æ¡†æ¶**: Next.js 14 + React 18
- **UIç»„ä»¶åº“**: Ant Design
- **æ ·å¼**: Tailwind CSS
- **åŒºå—é“¾äº¤äº’**: Wagmi + Ethers.js
- **ç±»å‹æ£€æŸ¥**: TypeScript

## åˆçº¦åœ°å€ (Anvilæœ¬åœ°ç½‘ç»œ)

- **EIP2612 Token**: `0xe7f1725E7734CE288F8367e1Bb143E90bb3F0512`
- **Token Bank**: `0x9fE46736679d2D9a65F0992F2272dE9f3c7fa6e0`
- **Permit2**: `0x000000000022D473030F116dDEE9F6B43aC78BA3`

## å®‰è£…å’Œè¿è¡Œ

### 1. å®‰è£…ä¾èµ–

```bash
npm install
```

### 2. å¯åŠ¨å¼€å‘æœåŠ¡å™¨

```bash
npm run dev
```

### 3. è®¿é—®åº”ç”¨

æ‰“å¼€æµè§ˆå™¨è®¿é—® [http://localhost:3000](http://localhost:3000)

## ä½¿ç”¨è¯´æ˜

### å‰ç½®æ¡ä»¶

1. ç¡®ä¿æœ¬åœ°Anvilç½‘ç»œæ­£åœ¨è¿è¡Œ (`anvil`)
2. åœ¨é’±åŒ…ä¸­æ·»åŠ Anvilç½‘ç»œé…ç½®:
   - ç½‘ç»œåç§°: Anvil
   - RPC URL: http://127.0.0.1:8545
   - é“¾ID: 31337
   - è´§å¸ç¬¦å·: ETH

### æ“ä½œæµç¨‹

1. **è¿æ¥é’±åŒ…**: ç‚¹å‡»"è¿æ¥é’±åŒ…"æŒ‰é’®è¿æ¥MetaMask
2. **æŸ¥çœ‹ä½™é¢**: è¿æ¥åè‡ªåŠ¨æ˜¾ç¤ºTokenä½™é¢ã€é“¶è¡Œä½™é¢ç­‰ä¿¡æ¯
3. **å­˜æ¬¾æ“ä½œ**:
   - **Permit2å­˜æ¬¾**: è¾“å…¥é‡‘é¢åç‚¹å‡»"Permit2å­˜æ¬¾"ï¼Œåªéœ€ä¸€æ¬¡ç­¾åå³å¯å®Œæˆå­˜æ¬¾
   - **æ ‡å‡†å­˜æ¬¾**: è¾“å…¥é‡‘é¢åç‚¹å‡»"æ ‡å‡†å­˜æ¬¾"ï¼Œéœ€è¦å…ˆæˆæƒå†å­˜æ¬¾ï¼ˆä¸¤æ¬¡äº¤æ˜“ï¼‰

## é¡¹ç›®ç»“æ„

```
src/
â”œâ”€â”€ abi/                 # åˆçº¦ABIæ–‡ä»¶
â”‚   â”œâ”€â”€ EIP2612Token.ts
â”‚   â”œâ”€â”€ EIP2612TokenBank.ts
â”‚   â”œâ”€â”€ Permit2.ts
â”‚   â””â”€â”€ index.ts
â”œâ”€â”€ app/                 # Next.jsåº”ç”¨é¡µé¢
â”‚   â”œâ”€â”€ globals.css
â”‚   â”œâ”€â”€ layout.tsx
â”‚   â””â”€â”€ page.tsx
â”œâ”€â”€ config/              # é…ç½®æ–‡ä»¶
â”‚   â”œâ”€â”€ contracts.ts     # åˆçº¦åœ°å€é…ç½®
â”‚   â””â”€â”€ wagmi.ts         # Wagmié…ç½®
â”œâ”€â”€ types/               # TypeScriptç±»å‹å®šä¹‰
â”‚   â””â”€â”€ global.d.ts
â””â”€â”€ utils/               # å·¥å…·å‡½æ•°
    â””â”€â”€ ethers.ts        # Ethers.jså·¥å…·å‡½æ•°
```

## å¼€å‘è¯´æ˜

### Permit2 ç­¾åæµç¨‹

1. åˆ›å»ºPermitSingleæ•°æ®ç»“æ„
2. ä½¿ç”¨EIP-712æ ‡å‡†è¿›è¡Œç­¾å
3. è°ƒç”¨åˆçº¦çš„`depositWithPermit2`æ–¹æ³•

### ä¸»è¦å·¥å…·å‡½æ•°

- `createPermit2Signature`: åˆ›å»ºPermit2ç­¾å
- `createTokenContract`: åˆ›å»ºTokenåˆçº¦å®ä¾‹
- `createTokenBankContract`: åˆ›å»ºTokenBankåˆçº¦å®ä¾‹
- `createPermit2Contract`: åˆ›å»ºPermit2åˆçº¦å®ä¾‹

## æ³¨æ„äº‹é¡¹

1. ç¡®ä¿Anvilç½‘ç»œæ­£åœ¨è¿è¡Œ
2. ç¡®ä¿é’±åŒ…å·²è¿æ¥åˆ°æ­£ç¡®çš„ç½‘ç»œ
3. ç¡®ä¿è´¦æˆ·æœ‰è¶³å¤Ÿçš„ETHæ”¯ä»˜Gasè´¹ç”¨
4. ç¡®ä¿è´¦æˆ·æœ‰è¶³å¤Ÿçš„Tokenä½™é¢è¿›è¡Œå­˜æ¬¾

## æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

1. **é’±åŒ…è¿æ¥å¤±è´¥**: æ£€æŸ¥MetaMaskæ˜¯å¦å·²å®‰è£…å¹¶è§£é”
2. **äº¤æ˜“å¤±è´¥**: æ£€æŸ¥ç½‘ç»œè¿æ¥å’ŒGasè´¹ç”¨è®¾ç½®
3. **ä½™é¢ä¸æ›´æ–°**: åˆ·æ–°é¡µé¢æˆ–é‡æ–°è¿æ¥é’±åŒ…

### å¼€å‘è°ƒè¯•

```bash
# æ£€æŸ¥ä»£ç æ ¼å¼
npm run lint

# æ„å»ºé¡¹ç›®
npm run build

# å¯åŠ¨ç”Ÿäº§æœåŠ¡å™¨
npm start
```